<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="653px" preserveAspectRatio="none" style="width:1385px;height:653px;" version="1.1" viewBox="0 0 1385 653" width="1385px" zoomAndPan="magnify"><defs><filter height="300%" id="f17iw0mfngsf4l" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="323" x="524.5" y="19.2419">CAIT (Capturing AST-Included Trees)</text><!--MD5=[130ca2019c9c9a3d4acd07200dcb892e]
class CAIT--><rect codeLine="6" fill="#FEFECE" filter="url(#f17iw0mfngsf4l)" height="171.8551" id="CAIT" style="stroke:#A80036;stroke-width:1.5;" width="353" x="7" y="31.5158"/><ellipse cx="165.75" cy="47.5158" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M165.2188,54.4377 Q163.4688,54.4377 162.3281,53.7033 Q161.2031,52.9533 160.6406,51.6096 Q160.0938,50.2502 160.0938,48.4533 Q160.0938,46.4221 160.75,44.969 Q161.4063,43.5158 162.6875,42.7346 Q163.9688,41.9533 165.8438,41.9533 Q166.7344,41.9533 167.4063,42.1408 Q168.0781,42.3127 168.7656,42.6565 L167.9531,44.6721 Q167.3281,44.3596 166.7813,44.2346 Q166.25,44.1096 165.7656,44.1096 Q164.5938,44.1096 163.8906,44.6408 Q163.1875,45.1721 162.8906,46.1252 Q162.5938,47.0783 162.5938,48.344 Q162.5938,50.3596 163.3125,51.3283 Q164.0313,52.2815 165.625,52.2815 Q166.2188,52.2815 166.8438,52.1252 Q167.4688,51.969 168.2969,51.594 L168.2969,53.8127 Q167.5625,54.1252 166.7656,54.2815 Q165.9844,54.4377 165.2188,54.4377 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="27" x="186.25" y="52.1719">CAIT</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="359" y1="63.5158" y2="63.5158"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="279" x="13" y="79.2748">Instructor-facing wrapper for internal CAIT methods.</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="247" x="13" y="94.2566">Defers most of its functionality to TreeMatcher.</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="341" x="13" y="109.2385">Also contains methods for parsing Strings into JavaParser Nodes.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="8" x2="359" y1="116.4615" y2="116.4615"/><line style="stroke:#A80036;stroke-width:1.0;" x1="8" x2="359" y1="118.4615" y2="118.4615"/><ellipse cx="18" cy="146.4434" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="173" x="27" y="151.2023">parseFile(fileText: String) -&gt; Node</text><ellipse cx="18" cy="161.4253" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="167" x="27" y="166.1842">parseFile(filePath: Path) -&gt; Node</text><ellipse cx="18" cy="176.4072" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="188" x="27" y="181.1661">parseSource(source: String) -&gt; Node</text><ellipse cx="18" cy="191.3891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="300" x="27" y="196.148">findMatches(pattern: String, source: String) -&gt; List&lt;Node&gt;</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="8" x2="141" y1="131.9525" y2="131.9525"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="85" x="141" y="135.7204">Static methods</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="226" x2="359" y1="131.9525" y2="131.9525"/><!--MD5=[96708a592a11d570158cc32f62eaf9cb]
class TreeMatcher--><rect codeLine="18" fill="#FEFECE" filter="url(#f17iw0mfngsf4l)" height="141.8913" id="TreeMatcher" style="stroke:#A80036;stroke-width:1.5;" width="378" x="420" y="54.5058"/><ellipse cx="568.25" cy="70.5058" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M567.7188,77.4277 Q565.9688,77.4277 564.8281,76.6933 Q563.7031,75.9433 563.1406,74.5996 Q562.5938,73.2402 562.5938,71.4433 Q562.5938,69.4121 563.25,67.959 Q563.9063,66.5058 565.1875,65.7246 Q566.4688,64.9433 568.3438,64.9433 Q569.2344,64.9433 569.9063,65.1308 Q570.5781,65.3027 571.2656,65.6465 L570.4531,67.6621 Q569.8281,67.3496 569.2813,67.2246 Q568.75,67.0996 568.2656,67.0996 Q567.0938,67.0996 566.3906,67.6308 Q565.6875,68.1621 565.3906,69.1152 Q565.0938,70.0683 565.0938,71.334 Q565.0938,73.3496 565.8125,74.3183 Q566.5313,75.2715 568.125,75.2715 Q568.7188,75.2715 569.3438,75.1152 Q569.9688,74.959 570.7969,74.584 L570.7969,76.8027 Q570.0625,77.1152 569.2656,77.2715 Q568.4844,77.4277 567.7188,77.4277 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="73" x="588.75" y="75.1619">TreeMatcher</text><line style="stroke:#A80036;stroke-width:1.5;" x1="421" x2="797" y1="86.5058" y2="86.5058"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="185" x="426" y="102.2648">Drives the AST matching algorithm.</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="366" x="426" y="117.2466">Can shallow match (attributes only) or deep match (recursive descent).</text><line style="stroke:#A80036;stroke-width:1.0;" x1="421" x2="797" y1="124.4696" y2="124.4696"/><line style="stroke:#A80036;stroke-width:1.0;" x1="421" x2="797" y1="126.4696" y2="126.4696"/><ellipse cx="431" cy="154.4515" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="288" x="440" y="159.2104">findMatches(node1: Node, node2: Node) -&gt; List&lt;Match&gt;</text><ellipse cx="431" cy="169.4334" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="277" x="440" y="174.1923">shallowMatch(node1: Node, node2: Node) -&gt; boolean</text><ellipse cx="431" cy="184.4153" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="282" x="440" y="189.1742">deepMatch(node1: Node, node2: Node) -&gt; List&lt;Match&gt;</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="421" x2="584.5" y1="139.9606" y2="139.9606"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="49" x="584.5" y="143.7285">Methods</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="633.5" x2="797" y1="139.9606" y2="139.9606"/><!--MD5=[5f0899136ed8f523b18ed05779c24112]
class Match--><rect codeLine="28" fill="#FEFECE" filter="url(#f17iw0mfngsf4l)" height="126.9094" id="Match" style="stroke:#A80036;stroke-width:1.5;" width="400" x="914.5" y="66.9958"/><ellipse cx="1092.75" cy="82.9958" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1092.2188,89.9177 Q1090.4688,89.9177 1089.3281,89.1833 Q1088.2031,88.4333 1087.6406,87.0896 Q1087.0938,85.7302 1087.0938,83.9333 Q1087.0938,81.9021 1087.75,80.449 Q1088.4063,78.9958 1089.6875,78.2146 Q1090.9688,77.4333 1092.8438,77.4333 Q1093.7344,77.4333 1094.4063,77.6208 Q1095.0781,77.7927 1095.7656,78.1365 L1094.9531,80.1521 Q1094.3281,79.8396 1093.7813,79.7146 Q1093.25,79.5896 1092.7656,79.5896 Q1091.5938,79.5896 1090.8906,80.1208 Q1090.1875,80.6521 1089.8906,81.6052 Q1089.5938,82.5583 1089.5938,83.824 Q1089.5938,85.8396 1090.3125,86.8083 Q1091.0313,87.7615 1092.625,87.7615 Q1093.2188,87.7615 1093.8438,87.6052 Q1094.4688,87.449 1095.2969,87.074 L1095.2969,89.2927 Q1094.5625,89.6052 1093.7656,89.7615 Q1092.9844,89.9177 1092.2188,89.9177 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="1113.25" y="87.6519">Match</text><line style="stroke:#A80036;stroke-width:1.5;" x1="915.5" x2="1313.5" y1="98.9958" y2="98.9958"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="388" x="920.5" y="114.7548">Represents one possible mapping of the pattern node to the source node.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="915.5" x2="1313.5" y1="121.9777" y2="121.9777"/><line style="stroke:#A80036;stroke-width:1.0;" x1="915.5" x2="1313.5" y1="123.9777" y2="123.9777"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="922.5" y="148.9596"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="102" x="934.5" y="156.7185">studentNode: Node</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="922.5" y="163.9415"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="114" x="934.5" y="171.7004">instructorNode: Node</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="922.5" y="178.9234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="139" x="934.5" y="186.6823">symbolTable: SymbolTable</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="915.5" x2="1098.5" y1="137.4687" y2="137.4687"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="32" x="1098.5" y="141.2366">Fields</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="1130.5" x2="1313.5" y1="137.4687" y2="137.4687"/><!--MD5=[6585dc51e3fc1f40fb4eab6b6c55514c]
class SymbolTable--><rect codeLine="37" fill="#FEFECE" filter="url(#f17iw0mfngsf4l)" height="190.837" id="SymbolTable" style="stroke:#A80036;stroke-width:1.5;" width="343" x="437.5" y="231.0258"/><ellipse cx="568.75" cy="247.0258" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M568.2188,253.9477 Q566.4688,253.9477 565.3281,253.2133 Q564.2031,252.4633 563.6406,251.1196 Q563.0938,249.7602 563.0938,247.9633 Q563.0938,245.9321 563.75,244.479 Q564.4063,243.0258 565.6875,242.2446 Q566.9688,241.4633 568.8438,241.4633 Q569.7344,241.4633 570.4063,241.6508 Q571.0781,241.8227 571.7656,242.1665 L570.9531,244.1821 Q570.3281,243.8696 569.7813,243.7446 Q569.25,243.6196 568.7656,243.6196 Q567.5938,243.6196 566.8906,244.1508 Q566.1875,244.6821 565.8906,245.6352 Q565.5938,246.5883 565.5938,247.854 Q565.5938,249.8696 566.3125,250.8383 Q567.0313,251.7915 568.625,251.7915 Q569.2188,251.7915 569.8438,251.6352 Q570.4688,251.479 571.2969,251.104 L571.2969,253.3227 Q570.5625,253.6352 569.7656,253.7915 Q568.9844,253.9477 568.2188,253.9477 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="589.25" y="251.6819">SymbolTable</text><line style="stroke:#A80036;stroke-width:1.5;" x1="438.5" x2="779.5" y1="263.0258" y2="263.0258"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="331" x="443.5" y="278.7848">Holds all potential mappings of pattern nodes to source nodes.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="438.5" x2="779.5" y1="286.0077" y2="286.0077"/><line style="stroke:#A80036;stroke-width:1.0;" x1="438.5" x2="779.5" y1="288.0077" y2="288.0077"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="445.5" y="312.9896"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="151" x="457.5" y="320.7485">table: Map&lt;Symbol, Symbol&gt;</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="438.5" x2="593" y1="301.4987" y2="301.4987"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="32" x="593" y="305.2666">Fields</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="625" x2="779.5" y1="301.4987" y2="301.4987"/><ellipse cx="448.5" cy="349.9534" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="225" x="457.5" y="354.7123">merge(other: SymbolTable) -&gt; SymbolTable</text><ellipse cx="448.5" cy="364.9353" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="239" x="457.5" y="369.6942">addSymbol(key: String, value: Symbol) -&gt; void</text><ellipse cx="448.5" cy="379.9172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="208" x="457.5" y="384.6761">getSymbolDataType(key: String) -&gt; Type</text><ellipse cx="448.5" cy="394.8991" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="229" x="457.5" y="399.658">getSymbolName(key: String) -&gt; SimpleName</text><ellipse cx="448.5" cy="409.8809" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="220" x="457.5" y="414.6399">getSymbolValue(key: String) -&gt; Expression</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="438.5" x2="584.5" y1="335.4625" y2="335.4625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="49" x="584.5" y="339.2304">Methods</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="633.5" x2="779.5" y1="335.4625" y2="335.4625"/><!--MD5=[4652c25024297e39a6a41a22817443d8]
class InstructorSymbolTable--><rect codeLine="50" fill="#FEFECE" filter="url(#f17iw0mfngsf4l)" height="175.8551" id="InstructorSymbolTable" style="stroke:#A80036;stroke-width:1.5;" width="513" x="858" y="435.5158"/><ellipse cx="1046.75" cy="451.5158" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1046.2188,458.4377 Q1044.4688,458.4377 1043.3281,457.7033 Q1042.2031,456.9533 1041.6406,455.6096 Q1041.0938,454.2502 1041.0938,452.4533 Q1041.0938,450.4221 1041.75,448.969 Q1042.4063,447.5158 1043.6875,446.7346 Q1044.9688,445.9533 1046.8438,445.9533 Q1047.7344,445.9533 1048.4063,446.1408 Q1049.0781,446.3127 1049.7656,446.6565 L1048.9531,448.6721 Q1048.3281,448.3596 1047.7813,448.2346 Q1047.25,448.1096 1046.7656,448.1096 Q1045.5938,448.1096 1044.8906,448.6408 Q1044.1875,449.1721 1043.8906,450.1252 Q1043.5938,451.0783 1043.5938,452.344 Q1043.5938,454.3596 1044.3125,455.3283 Q1045.0313,456.2815 1046.625,456.2815 Q1047.2188,456.2815 1047.8438,456.1252 Q1048.4688,455.969 1049.2969,455.594 L1049.2969,457.8127 Q1048.5625,458.1252 1047.7656,458.2815 Q1046.9844,458.4377 1046.2188,458.4377 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="127" x="1067.25" y="456.1719">InstructorSymbolTable</text><line style="stroke:#A80036;stroke-width:1.5;" x1="859" x2="1370" y1="467.5158" y2="467.5158"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="191" x="864" y="483.2748">Adds one-to-many mapping utilities.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="859" x2="1370" y1="490.4977" y2="490.4977"/><line style="stroke:#A80036;stroke-width:1.0;" x1="859" x2="1370" y1="492.4977" y2="492.4977"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="866" y="517.4796"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="344" x="878" y="525.2385">instructorToStudentMapping: Map&lt;String, Map&lt;String, Symbol&gt;&gt;</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="859" x2="1098.5" y1="505.9887" y2="505.9887"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="32" x="1098.5" y="509.7566">Fields</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="1130.5" x2="1370" y1="505.9887" y2="505.9887"/><ellipse cx="869" cy="554.4434" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="487" x="878" y="559.2023">addStudentSymbol(instructorKey: String, studentKey: String, studentSymbol: Symbol) -&gt; void</text><ellipse cx="869" cy="569.4253" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="390" x="878" y="574.1842">lookupStudentSymbol(instructorKey: String, studentKey: String) -&gt; Symbol</text><ellipse cx="869" cy="584.4072" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="315" x="878" y="589.1661">mergeInstructorTable(other: InstructorSymbolTable) -&gt; void</text><ellipse cx="869" cy="599.3891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="335" x="878" y="604.148">hasConflict(instructorKey: String, studentKey: String) -&gt; boolean</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="859" x2="1090" y1="539.9525" y2="539.9525"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="49" x="1090" y="543.7204">Methods</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="1139" x2="1370" y1="539.9525" y2="539.9525"/><!--MD5=[c8f26355d1fec44ada26e4ba58e9b7f7]
class ScopedSymbolTable--><rect codeLine="62" fill="#FEFECE" filter="url(#f17iw0mfngsf4l)" height="160.8732" id="ScopedSymbolTable" style="stroke:#A80036;stroke-width:1.5;" width="284" x="972.5" y="240.0158"/><ellipse cx="1053.75" cy="256.0158" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1053.2188,262.9377 Q1051.4688,262.9377 1050.3281,262.2033 Q1049.2031,261.4533 1048.6406,260.1096 Q1048.0938,258.7502 1048.0938,256.9533 Q1048.0938,254.9221 1048.75,253.469 Q1049.4063,252.0158 1050.6875,251.2346 Q1051.9688,250.4533 1053.8438,250.4533 Q1054.7344,250.4533 1055.4063,250.6408 Q1056.0781,250.8127 1056.7656,251.1565 L1055.9531,253.1721 Q1055.3281,252.8596 1054.7813,252.7346 Q1054.25,252.6096 1053.7656,252.6096 Q1052.5938,252.6096 1051.8906,253.1408 Q1051.1875,253.6721 1050.8906,254.6252 Q1050.5938,255.5783 1050.5938,256.844 Q1050.5938,258.8596 1051.3125,259.8283 Q1052.0313,260.7815 1053.625,260.7815 Q1054.2188,260.7815 1054.8438,260.6252 Q1055.4688,260.469 1056.2969,260.094 L1056.2969,262.3127 Q1055.5625,262.6252 1054.7656,262.7815 Q1053.9844,262.9377 1053.2188,262.9377 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="1074.25" y="260.6719">ScopedSymbolTable</text><line style="stroke:#A80036;stroke-width:1.5;" x1="973.5" x2="1255.5" y1="272.0158" y2="272.0158"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="182" x="978.5" y="287.7748">Additionally tracks scope of nodes.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="973.5" x2="1255.5" y1="294.9977" y2="294.9977"/><line style="stroke:#A80036;stroke-width:1.0;" x1="973.5" x2="1255.5" y1="296.9977" y2="296.9977"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="980.5" y="321.9796"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="181" x="992.5" y="329.7385">scopes: Map&lt;String, SymbolTable&gt;</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="973.5" x2="1098.5" y1="310.4887" y2="310.4887"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="32" x="1098.5" y="314.2566">Fields</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="1130.5" x2="1255.5" y1="310.4887" y2="310.4887"/><ellipse cx="983.5" cy="358.9434" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="194" x="992.5" y="363.7023">addScope(scopeName: String) -&gt; void</text><ellipse cx="983.5" cy="373.9253" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="235" x="992.5" y="378.6842">getScope(scopeName: String) -&gt; SymbolTable</text><ellipse cx="983.5" cy="388.9072" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="258" x="992.5" y="393.6661">lookup(key: String, scopeName: String) -&gt; Symbol</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="973.5" x2="1090" y1="344.4525" y2="344.4525"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="49" x="1090" y="348.2204">Methods</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="1139" x2="1255.5" y1="344.4525" y2="344.4525"/><!--MD5=[9ca48261ea57514906883625ea0cbf93]
class Symbol--><rect codeLine="73" fill="#FEFECE" filter="url(#f17iw0mfngsf4l)" height="190.837" id="Symbol" style="stroke:#A80036;stroke-width:1.5;" width="340" x="13.5" y="238.0258"/><ellipse cx="158.75" cy="254.0258" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M158.2188,260.9477 Q156.4688,260.9477 155.3281,260.2133 Q154.2031,259.4633 153.6406,258.1196 Q153.0938,256.7602 153.0938,254.9633 Q153.0938,252.9321 153.75,251.479 Q154.4063,250.0258 155.6875,249.2446 Q156.9688,248.4633 158.8438,248.4633 Q159.7344,248.4633 160.4063,248.6508 Q161.0781,248.8227 161.7656,249.1665 L160.9531,251.1821 Q160.3281,250.8696 159.7813,250.7446 Q159.25,250.6196 158.7656,250.6196 Q157.5938,250.6196 156.8906,251.1508 Q156.1875,251.6821 155.8906,252.6352 Q155.5938,253.5883 155.5938,254.854 Q155.5938,256.8696 156.3125,257.8383 Q157.0313,258.7915 158.625,258.7915 Q159.2188,258.7915 159.8438,258.6352 Q160.4688,258.479 161.2969,258.104 L161.2969,260.3227 Q160.5625,260.6352 159.7656,260.7915 Q158.9844,260.9477 158.2188,260.9477 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="41" x="179.25" y="258.6819">Symbol</text><line style="stroke:#A80036;stroke-width:1.5;" x1="14.5" x2="352.5" y1="270.0258" y2="270.0258"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="328" x="19.5" y="285.7848">Represents a single Java symbol, such as an identifier or literal.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="14.5" x2="352.5" y1="293.0077" y2="293.0077"/><line style="stroke:#A80036;stroke-width:1.0;" x1="14.5" x2="352.5" y1="295.0077" y2="295.0077"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="21.5" y="319.9896"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="33.5" y="327.7485">name: SimpleName</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="21.5" y="334.9715"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="79" x="33.5" y="342.7304">dataType: Type</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="21.5" y="349.9534"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="33.5" y="357.7123">value: Expression</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="21.5" y="364.9353"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="153" x="33.5" y="372.6942">identifierType: IdentifierType</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="14.5" x2="167.5" y1="308.4987" y2="308.4987"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="32" x="167.5" y="312.2666">Fields</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="199.5" x2="352.5" y1="308.4987" y2="308.4987"/><ellipse cx="24.5" cy="401.8991" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="142" x="33.5" y="406.658">Symbol(sourceNode: Node)</text><ellipse cx="24.5" cy="416.8809" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="161" x="33.5" y="421.6399">match(other: Symbol): boolean</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="14.5" x2="159" y1="387.4081" y2="387.4081"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="49" x="159" y="391.1761">Methods</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="208" x2="352.5" y1="387.4081" y2="387.4081"/><!--MD5=[a6da717249a907f03f0e92554f6403c2]
class IdentifierType--><rect codeLine="86" fill="#FEFECE" filter="url(#f17iw0mfngsf4l)" height="175.8551" id="IdentifierType" style="stroke:#A80036;stroke-width:1.5;" width="314" x="26.5" y="463.5158"/><ellipse cx="140.25" cy="479.5158" fill="#EB937F" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M136.6094,486.0158 L136.6094,473.8752 L144.2656,473.8752 L144.2656,476.0002 L138.9844,476.0002 L138.9844,478.6565 L144,478.6565 L144,480.7815 L138.9844,480.7815 L138.9844,483.8908 L144.2656,483.8908 L144.2656,486.0158 L136.6094,486.0158 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="78" x="160.75" y="484.1719">IdentifierType</text><line style="stroke:#A80036;stroke-width:1.5;" x1="27.5" x2="339.5" y1="495.5158" y2="495.5158"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="302" x="32.5" y="511.2748">Represents the possible patterns usable by the instructor.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="27.5" x2="339.5" y1="518.4977" y2="518.4977"/><line style="stroke:#A80036;stroke-width:1.0;" x1="27.5" x2="339.5" y1="520.4977" y2="520.4977"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="31" x="32.5" y="553.2385">NONE</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="44" x="32.5" y="568.2204">SYMBOL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="65" x="32.5" y="583.2023">EXPRESSION</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="62" x="32.5" y="598.1842">WILD_CARD</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="27.5" x2="165" y1="533.9887" y2="533.9887"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="37" x="165" y="537.7566">Values</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="202" x2="339.5" y1="533.9887" y2="533.9887"/><ellipse cx="37.5" cy="627.3891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="201" x="46.5" y="632.148">identify(lexeme: String): IdentifierType</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="27.5" x2="141" y1="612.8981" y2="612.8981"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="85" x="141" y="616.6661">Static methods</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="226" x2="339.5" y1="612.8981" y2="612.8981"/><!--MD5=[b9d03fe3f8cb8148d770742450f9b6c0]
reverse link SymbolTable to InstructorSymbolTable--><path d="M800.77,401.0858 C829.17,412.2058 858.67,423.7458 887.7,435.1058 " fill="none" id="SymbolTable-backto-InstructorSymbolTable" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="798.3,407.6358,782.22,393.8358,803.4,394.6058,798.3,407.6358" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6aa0deb38c51c595bc44b567b04dd26f]
reverse link SymbolTable to ScopedSymbolTable--><path d="M802.25,324.1558 C858.79,323.4858 919.58,322.7558 972.3,322.1358 " fill="none" id="SymbolTable-backto-ScopedSymbolTable" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="802.41,331.1558,782.33,324.3958,802.24,317.1558,802.41,331.1558" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a7f6bd22f7ddf3a58fd61dbaaa373dfe]
link CAIT to TreeMatcher--><path codeLine="98" d="M360.42,120.7758 C377.83,121.0958 395.57,121.4358 413.15,121.7658 " fill="none" id="CAIT-to-TreeMatcher" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="418.11,121.8658,409.1799,117.7122,413.1107,121.7801,409.0428,125.711,418.11,121.8658" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6ab05d119e0017f6582309bc05c16074]
link TreeMatcher to Match--><path codeLine="99" d="M798.2,127.3158 C833.98,127.6758 871.59,128.0458 907.88,128.4058 " fill="none" id="TreeMatcher-to-Match" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="912.65,128.4558,903.6846,124.3789,907.6502,128.413,903.616,132.3786,912.65,128.4558" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[b5a1859a257e1a93b9a7732dc164aa8f]
link TreeMatcher to SymbolTable--><path codeLine="100" d="M609,196.5458 C609,205.7858 609,215.0258 609,224.2658 " fill="none" id="TreeMatcher-to-SymbolTable" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="609,229.1458,613,220.1458,609,224.1458,605,220.1458,609,229.1458" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f7ea2563c88915633cf735fbc09a795e]
link SymbolTable to Match--><path codeLine="101" d="M780.97,253.4058 C806.69,242.8058 832.98,232.1858 858,222.4458 C880.07,213.8558 903.32,205.0858 926.44,196.5458 " fill="none" id="SymbolTable-to-Match" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="930.89,194.9058,921.0618,194.268,926.199,196.6364,923.8306,201.7736,930.89,194.9058" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8fd1d3b4a1ab4174ea113a99d600ef9a]
reverse link Symbol to SymbolTable--><path codeLine="102" d="M360.17,330.5458 C385.69,330.1258 411.92,329.6858 437.34,329.2658 " fill="none" id="Symbol-backto-SymbolTable" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="355.22,330.6258,364.2872,334.471,360.2193,330.5401,364.1501,326.4722,355.22,330.6258" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[fe16bb87990b7f7c958a296f488c665d]
link Symbol to IdentifierType--><path codeLine="103" d="M183.5,429.3258 C183.5,438.5258 183.5,447.7358 183.5,456.9358 " fill="none" id="Symbol-to-IdentifierType" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="183.5,461.7958,187.5,452.7958,183.5,456.7958,179.5,452.7958,183.5,461.7958" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[c937107ce519b5ce2e2296a4566f8dca]
@startuml CAIT

title "**CAIT (Capturing AST-Included Trees)**"

left to right direction

class CAIT {
    Instructor-facing wrapper for internal CAIT methods.
    Defers most of its functionality to TreeMatcher.
    Also contains methods for parsing Strings into JavaParser Nodes.
    ==
    .. **Static methods** ..
    + parseFile(fileText: String) -> Node
    + parseFile(filePath: Path) -> Node
    + parseSource(source: String) -> Node
    + findMatches(pattern: String, source: String) -> List<Node>
}

class TreeMatcher {
    Drives the AST matching algorithm.
    Can shallow match (attributes only) or deep match (recursive descent).
    ==
    .. **Methods** ..
    + findMatches(node1: Node, node2: Node) -> List<Match>
    + shallowMatch(node1: Node, node2: Node) -> boolean
    + deepMatch(node1: Node, node2: Node) -> List<Match>
}

class Match {
    Represents one possible mapping of the pattern node to the source node.
    ==
    .. **Fields** ..
    - studentNode: Node
    - instructorNode: Node
    - symbolTable: SymbolTable
}

class SymbolTable {
    Holds all potential mappings of pattern nodes to source nodes.
    ==
    .. **Fields** ..
    - table: Map<Symbol, Symbol>
    .. **Methods** ..
    + merge(other: SymbolTable) -> SymbolTable
    + addSymbol(key: String, value: Symbol) -> void
    + getSymbolDataType(key: String) -> Type
    + getSymbolName(key: String) -> SimpleName
    + getSymbolValue(key: String) -> Expression
}

class InstructorSymbolTable extends SymbolTable {
    Adds one-to-many mapping utilities.
    ==
    .. **Fields** ..
    - instructorToStudentMapping: Map<String, Map<String, Symbol>>
    .. **Methods** ..
    + addStudentSymbol(instructorKey: String, studentKey: String, studentSymbol: Symbol) -> void
    + lookupStudentSymbol(instructorKey: String, studentKey: String) -> Symbol
    + mergeInstructorTable(other: InstructorSymbolTable) -> void
    + hasConflict(instructorKey: String, studentKey: String) -> boolean
}

class ScopedSymbolTable extends SymbolTable {
    Additionally tracks scope of nodes.
    ==
    .. **Fields** ..
    - scopes: Map<String, SymbolTable>
    .. **Methods** ..
    + addScope(scopeName: String) -> void
    + getScope(scopeName: String) -> SymbolTable
    + lookup(key: String, scopeName: String) -> Symbol
}

class Symbol {
    Represents a single Java symbol, such as an identifier or literal.
    ==
    .. **Fields** ..
    - name: SimpleName
    - dataType: Type
    - value: Expression
    - identifierType: IdentifierType
    .. **Methods** ..
    + Symbol(sourceNode: Node)
    + match(other: Symbol): boolean
}

enum IdentifierType {
    Represents the possible patterns usable by the instructor.
    ==
    .. **Values** ..
    NONE
    SYMBOL
    EXPRESSION
    WILD_CARD
    .. **Static methods** ..
    + identify(lexeme: String): IdentifierType
}

CAIT - -> TreeMatcher
TreeMatcher - -> Match
TreeMatcher -> SymbolTable
SymbolTable - -> Match
Symbol <- - SymbolTable
Symbol -> IdentifierType

@enduml

PlantUML version 1.2021.00(Sun Jan 10 05:25:05 EST 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>